---
title: ダウンタイムなしのデプロイメント
description: クラウドインフラストラクチャプロジェクトにAdobe Commerceをデプロイする際の全体的なダウンタイムを短縮する方法について説明します。
feature: Cloud, Deploy, SCD, Themes
exl-id: c216c5e9-d787-4428-b67a-b6aee814ded5
source-git-commit: b831bc5bce0f76ec8972b3578c500508dd4d7d41
workflow-type: tm+mt
source-wordcount: '486'
ht-degree: 0%

---

# ダウンタイムなしのデプロイメント

クラウドインフラストラクチャー上のAdobe Commerceでは、デプロイフェーズ中にアプリケーションを [_メンテナンス_ モード ](https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/setup/application-modes.html#production-mode) で実行します。これにより、デプロイメントが完了するまでサイトがオフラインになります。 実稼動サイトがメンテナンスモードになっている時間の長さは、サイトのサイズ、デプロイメント中に適用される変更の数、静的コンテンツのデプロイメントの設定によって異なります。 ダウンタイムを **ゼロ** にデプロイするように、プロジェクトを設定できます。

デプロイメントプロセス中、すべての接続は最大 5 分間キューに入り、アクティブなセッションと保留中のアクション（買い物かごへの追加やチェックアウトなど）が保持されます。 デプロイ後、キューは解放され、接続は中断されずに続行されます。 この _接続保持_ を活用してデプロイメントを _ゼロ_ ダウンタイムに短縮するには、最も効率的なデプロイ戦略を使用するようにプロジェクトを設定する必要があります。

>[!NOTE]
>
>デプロイメントのダウンタイムを最小限に抑えるようにクラウドプロジェクトが最適に設定されているかどうかを確認するには、[ スマートウィザード ](smart-wizards.md) を使用します。 スマートウィザードは現在の設定を確認し、ダウンタイムなしのデプロイメントのベストプラクティスを可能にするための推奨される設定調整をガイドします。

次の手順を使用して、ストアが更新プログラムを実稼動環境にデプロイするまでにかかる時間を短縮します。

1. [`ece-tools` パッケージへのアップグレード ](../dev-tools/install-package.md) または [`ece-tools` バージョンのアップデート ](../dev-tools/update-package.md)
最適なデプロイメントを設定するためのツールを使用できるように、Adobe Commerce on cloud infrastructure プロジェクトに最新の `ece-tools` パッケージが必要です。 最新の `ece-tools` がある場合は、次の手順に進みます。

   >[!NOTE]
   >
   >最新の `ece-tools` パッケージを使用することがベストプラクティスですが、ダウンタイムなしのデプロイメント方法は `ece-tools` [ バージョン 2002.0.13](../release-notes/cloud-release-archive.md#v2002013) 以降で機能します。

1. [ 静的コンテンツデプロイメントの設定 ](static-content.md)
デプロイフェーズで静的コンテンツのデプロイメントが失敗すると、サイトがメンテナンスモードで停止します。 ビルドフェーズでエラーが発生した場合、プロセスはデプロイフェーズを開始しないので、ダウンタイムを回避できます。 [ 縮小されたHTMLを使用したビルドフェーズでの静的コンテンツの生成 ](static-content.md#setting-the-scd-on-build) （理想的な状態とも呼ばれます）は、ダウンタイムなしのデプロイメントや、エラーが発生した場合のダウンタイムの _防止_ に最適な設定です。

1. [ デプロイ後フックの設定 ](../application/hooks-property.md)
キャッシュをクリーンアップおよびウォームするには、デプロイ後のフックを設定する必要があります。 デフォルトでは、サイトがダウンした場合、デプロイフェーズでキャッシュクリーンアップが実行されます。 デプロイ後のフェーズにキャッシュのクリーンアップを移動すると、デプロイフェーズが完了するまでキャッシュがライブのままになり、キャッシュを安全にクリーンアップできます。

   [WARM_UP_PAGES 環境変数 ](../environment/variables-post-deploy.md#warmuppages) を使用して、キャッシュのプリロードに使用するページのリストをカスタマイズします。

1. [ テーマファイルを削減 ](../environment/variables-deploy.md#scdmatrix)
SCD\_MATRIX 環境変数を設定することで、不要なテーマファイルの数を減らすことができます。

1. [ 静的コンテンツのデプロイメントの迅速化 ](../environment/variables-deploy.md#scdthreads)
SCD\_THREADS環境変数を更新して、静的コンテンツのデプロイメントのスレッド数を増やすと、デプロイメントプロセスを高速化できます。

>[!NOTE]
>
>[ 理想的な状態ウィザードを実行する ](smart-wizards.md#verifying-an-ideal-configuration) ことで、最適なデプロイメントを行うためにプロジェクト設定を検証できます。
