---
title: プロプロジェクトワークフロー
description: Pro 開発ワークフローとデプロイメントワークフローの使用方法を説明します。
feature: Cloud, Iaas, Paas
exl-id: efe41991-8940-4d5c-a720-80369274bee3
source-git-commit: edff4efe0af54542321e887defc27dc96e6ae7f6
workflow-type: tm+mt
source-wordcount: '879'
ht-degree: 0%

---

# プロプロジェクトワークフロー

Pro プロジェクトには、グローバル `master` ブランチを持つ単一の Git リポジトリーと、次の 3 つの主な環境が含まれます。

1. **実稼働** ライブサイトの起動と保守のための環境
1. **ステージング** すべてのサービスを使用してテストする環境
1. **統合** 開発およびテスト環境

![Pro 環境リスト ](../../assets/pro-environments.png)

これらの環境は `read-only` ンプルされ、ローカルワークスペースからプッシュされたブランチからのデプロイ済みコードの変更のみを受け入れます。

次の図は、シンプルな Git ブランチのアプローチを使用する、Pro の開発とデプロイのワークフローを示しています。 [ 環境に基づくアクティブなブランチを使用してコードを ](#development-workflow) 開発 `integration`、リモートのアクティブなブランチとの間でコードの変更を _プッシュ_ および _プル_ します。 検証済みのコードをデプロイするには、リモートブランチをベースブランチに _マージ_ します。これにより、その環境の自動 [ ビルドおよびデプロイ ](#deployment-workflow) プロセスがアクティブになります。

![Pro アーキテクチャ開発ワークフローの概要 ](../../assets/pro-dev-workflow.png)

環境は読み取り専用なので、クラウド環境で直接コードを変更することはできません。 `composer install` を実行してモジュールをインストールしようとすると、次のようなエラーが発生します。

```bash
file_put_contents(...): Failed to open stream: Read-only file system  
The disk hosting /app/<cluster_ID> is full
```

>[!NOTE]
>
>この制限により、アプリケーションの整合性とセキュリティが保護されます。 これらの読み取り専用ファイルシステムのフォルダーアクセス権は変更できません。サポートでさえ変更できません。 変更は、アプリケーション環境のブランチから行い、ローカル開発環境にプッシュする必要があります。 詳細については、[Pro アーキテクチャ ](pro-architecture.md) を参照して Pro 環境の概要を確認し、プロジェクト ビューの Pro 環境リストの概要については、[[!DNL Cloud Console]](../project/overview.md#cloud-console) を参照してください。

## 開発ワークフロー

統合環境は、クラウドインフラストラクチャコード上のAdobe Commerceを含んだ、単一のベース `integration` ブランチを提供します。 アクティブな環境ブランチを 1 つ追加で作成できます。 これにより、最大 2 つのアクティブなブランチを、Platform as a Service （PaaS）コンテナにデプロイできます。 非アクティブな環境の数に制限はありませんが、非アクティブな環境が多いほど、Cloud Console の読み込みに時間がかかります。

{{enhanced-integration-envs}}

プロジェクト環境は、柔軟な継続的統合プロセスをサポートします。 まず、`integration` ブランチをローカルプロジェクトフォルダーに複製します。 1 つまたは複数のブランチの作成、新機能の開発、変更の設定、拡張機能の追加、更新のデプロイを行います。

- **取得** 変更を `integration` から

- **から** 分岐 `integration`

- ロー **ルアップデートを含むローカルワークステーションでのコードの** 開発 [!DNL Composer]

- **プッシュ** コードの変更をリモートに送信し、検証します

- **結合** して `integration` ストおよびテストする

開発されたコードブランチと対応する設定ファイルを使用すると、コードの変更を `integration` ブランチに結合して、より包括的なテストを行う準備が整います。 `integration` の環境は、次の場合にも最適です。

- **サードパーティのサービスの統合** - PaaS 環境では、すべてのサービスが使用できるわけではありません。

- **構成管理ファイルの生成** - デプロイ済の環境では、一部の構成設定は _読み取り専用_ です。

- **ストアの設定** – 統合環境を使用して、すべてのストア設定を完全に設定する必要があります。 **ストア管理者 URL** は、_の_ integration _[!DNL Cloud Console]_環境表示にあります。

## デプロイメントワークフロー

コードをローカル ワークステーションからリモート環境にプッシュしたり、コードを環境ブランチにマージしたりするたびに、ビルド スクリプトとデプロイ スクリプトが新しいコードを生成し、設定済みのサービスをリモート環境にプロビジョニングします。

スクリプト アクションの作成：

- ターゲット環境内のサイトは、ビルド中も引き続き実行されます

- Adobe Commerce on cloud infrastructure のパッチおよびホットフィックスを確認して実行します。

- ビルドおよびデプロイログを使用したコードのコンパイル

- 設定管理のチェック。このフェーズでは静的コンテンツのデプロイメントが行われます。

- 変更されていないコードのスラッグを作成または使用して、プロセスを高速化します

- すべてのバックエンドサービスおよびアプリケーションのプロビジョニング

スクリプト アクションの展開：

- サイトをターゲット環境の _メンテナンス_ モードに配置する

- ビルド中に静的コンテンツのデプロイが完了していない場合

- クラウドインフラストラクチャー上でのAdobe Commerceのインストールまたは更新

- トラフィックのルーティングの設定

ビルドおよびデプロイプロセスが完了すると、ストアは最新のコード変更と設定を使用してオンラインに戻ります。 [ デプロイメントプロセス ](../deploy/process.md) を参照してください。

### 統合に結合

アクティブな開発ブランチをベースの開発ブランチにマージして、検証済みのすべてのコード変更を組み合わせ `integration` す。 変更をステージング環境に昇格させる前に、`integration` ブランチですべての変更をテストできます。

### ステージングに結合

ステージングは、実稼動環境にできるだけ近い場所ですべてのサービスと設定を提供する、実稼動前の環境です。 コードの変更を常に `integration` 環境から `staging` 環境にプッシュして、すべてのサービスで徹底的なテストを実行できるようにします。 ステージング環境を初めて使用する場合は、[Fastly CDN](../cdn/fastly.md) や [New Relic](../monitor/new-relic-service.md) などのサービスを設定する必要があります。 サンドボックスまたはテスト資格情報を使用して、支払いゲートウェイ、送料、通知、その他の重要なサービスを設定します。

ストアが実稼動環境に対応できる状態になるまで、すべてのサービスを徹底的にテストし、パフォーマンステストツールを検証し、管理者およびお客様として UAT テストを実行することをお勧めします。 [ ストアのデプロイ ](../deploy/staging-production.md) を参照してください。

{{second-staging}}

### 実稼動に結合

ステージング環境で十分なテストを行った後、実稼動環境に結合し、ライブ資格情報を使用して十分にテストします。 実稼動サイトを立ち上げた瞬間に、顧客は購入を完了でき、管理者はライブストアを管理できる必要があります。 ストアのデプロイと運用開始に関する詳細で明確な手順については、次のトピックを参照してください。

- [ストアのデプロイ](../deploy/staging-production.md)
- [サイトの起動](../launch/overview.md)

### グローバルマスターに結合

サービスを中断せずに実稼動環境をデバッグする必要が生じた場合に備えて、常に実稼動コードのコピーをグローバル `master` ードにプッシュします。

グロ **バル** から分岐を作成しないでくださ `master`。 `integration` ブランチを使用して、開発および修正用の新しいアクティブなブランチを作成します。
